
<!DOCTYPE html>
<html lang="en">

<head>
    <title>The Acronymizer</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
</head>
<style>
    :root {
        font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
            "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
        text-align: center;
        background-color: white;
    }

    #navbar {
        font-size: xx-large;
        font-weight: bold;
        background-color: rgb(32, 70, 238);
        padding: 5px;
        height: 150px;
    }

    #title {
        position: relative;
        top: 40px;
        color: white;
        margin: auto;
        width: 650px;
    }

    #subtitle {
        color: black;
        height: 25px;
        width: 120px;
        margin: auto;
        font-weight: 900;
        padding-bottom: 10px;
        padding-top: 15px;
        transform: rotate(0deg);
        transition-duration: 0.5s;
    }

    #subtitle:hover {
        transform: rotate(-7deg);
        transition-duration: 0.5s;
    }

    a {
        text-decoration: none;
    }

    a:link {
        color: rgb(32, 70, 238);
        font-size: large;
    }

    a:visited {
        color: rgb(107, 34, 243);
    }

    a:hover {
        color: rgb(105, 175, 255);
        transition-duration: 0.2s;
    }

    a:active {
        color: aqua;
        text-decoration: underline;
    }

    p {
        color: black;
    }

    textarea {
        color: black;
        resize: none;
        border: 3px solid;
        border-radius: 10px;
        width: 300px;
        height: 50px;
        padding: 10px;
        font-weight: 900;
        font-size: 30px;
    }

    #input {
        position: relative;
        top: 50px;
        left: -200px;
    }

    #output {
        color: black;
        position: relative;
        top: -30px;
        left: 200px;
        border: 3px solid;
        border-radius: 10px;
        margin: auto;
        width: 300px;
        height: 50px;
        padding: 10px;
        font-weight: 900;
        font-size: 17px;
        text-align: left;
        overflow-x: auto;
        overflow-y: scroll;
    }

    #inputtext {
        position: relative;
        top: -117px;
        left: -100px;
        margin: auto;
        width: 60px;
        background-color: white;
        font-size: large;
    }

    #outputtext {
        position: relative;
        top: -138px;
        left: 105px;
        margin: auto;
        width: 70px;
        background-color: white;
        font-size: large;
    }


    #send {
        position: relative;
        width: 30px;
        top: -110px;
        left: -65px;
    }
</style>

<body>

    <div id="navbar">
        <h1 id="title">
            The Acronymizer
        </h1>
    </div>

    <div id="subtitle">
        By
        <a id="anicetus" href="https://www.github.com/invictus-anic3tus/" target="_blank"
            rel="noopener noreferrer">Anicetus</a>
    </div>
    <textarea id="input"></textarea>
    <div id="output"></div>

    <p id="inputtext">Input</p>
    <p id="outputtext">Output</p>

    <input type="image" src="send.png" onclick="submit()" id="send">
</body>
<script>
    const title = document.getElementById("title");
    const navbar = document.getElementById("navbar");
    const send = document.getElementById("send");
    const output = document.getElementById("output");

    const ms = 100;
    var inputtext = "";

    var currentColor = window.getComputedStyle(navbar).backgroundColor;

    var active = false;

    const textvals = [
        "tHe AcRoNyMiZeR",
        "ThE aCrOnYmIzEr",
        "THE acronymizer",
        "the ACRONYMIZER",
        "The acriukmizef",
        "Tje AmizercaneR",
        "The asdlfjasflk",
        "The k18tp23ppfk",
        "The A9udepzmom;",
        "The ALKjFSfu094",
        "The Aasfwr3345d",
        "The Abwaf;lafad",
        "The Acv76745eff",
        "The Ac23zfdahgf",
        "The Acfg6555chj",
        "The Acrx12123rf",
        "The Acr2rt4tutf",
        "The Acrq234dsaa",
        "The Acroa[sd]fd",
        "The Acron12uofj",
        "The Acronylajfj",
        "The Acronymfl;a",
        "The Acronymi4fA",
        "The Acronymizgf",
        "The Acronymize5",
        "The Acronymizer",
    ];

    let i = 0;

    let intervalId = null;

    function changetext() {

        active = true;
        console.log("mouse");


        var targetcolor = [
            Math.floor(Math.random() * 128) + 128,
            Math.floor(Math.random() * 128) + 128,
            Math.floor(Math.random() * 128) + 128
        ];

        var rdist = 0;
        var gdist = 0;
        var bdist = 0;

        var rgbValues = [32, 70, 238];

        if (intervalId) {
            clearInterval(intervalId);
        }

        intervalId = setInterval(scrolltext, ms);

        function scrolltext() {

            if (active) {
                rgbValues = currentColor.match(/\d+/g).map(Number);
                console.log(rgbValues);

                rdist = targetcolor[0] - rgbValues[0];
                gdist = targetcolor[1] - rgbValues[1];
                bdist = targetcolor[2] - rgbValues[2];


                if (i < textvals.length) {

                    console.log(`${i} < textvals.length`);

                    let newRedValue = rgbValues[0] - 2;
                    let newGreenValue = rgbValues[1] - 2;
                    let newBlueValue = rgbValues[2] - 2;

                    let newcolor = `rgb(${newRedValue}, ${newGreenValue}, ${newBlueValue})`;
                    navbar.style.backgroundColor = newcolor;
                    title.textContent = textvals[i];
                    i++;
                } else {
                    clearInterval(intervalId);
                    intervalId = null;
                }
            }


        }
    }

    function defaulttext() {

        if (intervalId) {
            clearInterval(intervalId); // Clear any existing interval
            intervalId = null; // Reset the interval ID
        }
        active = false;
        console.log("unmouse");
        title.textContent = "The Acronymizer";
        i = 0;
    }

    title.addEventListener("mouseover", changetext);
    title.addEventListener("mouseout", defaulttext);

    function submit() {
        inputtext = document.getElementById("input").value;

        console.log(`Send Click: ${inputtext}`);

        sendFly();

        generateResponse(inputtext);
    }

    let positionX = parseInt(send.style.left, 10) || 0;
    const originalX = parseInt(send.style.left, 10) || 0;
    let direction = 1;
    let wrapped = false;

    function sendFly() {
        const rect = send.getBoundingClientRect();
        const distanceFromLeft = rect.left;

        positionX += 5 * direction;

        if (positionX > window.innerWidth - (distanceFromLeft - 890)) {
            positionX = -send.offsetWidth - (distanceFromLeft - 890);
            wrapped = true;
        }

        send.style.left = positionX + "px";

        if (positionX >= originalX - 65 && wrapped) { wrapped = false; }
        else { requestAnimationFrame(sendFly); }

    }


    async function generateResponse(inputText) {

    try {

        const response = await fetch('https://invictus-anic3tus.github.io/submit', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ message: inputText })
        });

        if (!response.ok) {
          const errorText = await response.text(); // Reads the error as text
          console.error("Error response:", errorText);
          throw new Error("Server responded with an error");
        }

        const data = await response.json();
        document.getElementById('output').innerText = data.response;
      } catch (error) {
        console.error("Error:", error);
        document.getElementById('output').innerText = "An error occurred, please try again.";
      }
    }


</script>

</html>
